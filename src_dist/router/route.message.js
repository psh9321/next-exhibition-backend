let AuthToken=require("../middleware/middleware.auth").AuthToken,{GetMessageRoom,GetAnotherUser,GetMessagesRoomData,SetReadMessage}=require("../api/api.message"),router=require("express").Router();router.get(`/${process.env.API_URL_METHOD}/message/anoter/:_id`,AuthToken,async(e,s)=>{try{var t=e.params._id,a=await GetAnotherUser(t);s.status(200).send(a)}catch(e){s.status(500).send(e)}}),router.get(`/${process.env.API_URL_METHOD}/message/room`,AuthToken,async(e,s)=>{try{var t=e.id,a=await GetMessageRoom(t);s.status(200).send(a)}catch(e){s.status(500).send(e)}}),router.get(`/${process.env.API_URL_METHOD}/message/data/:anotherId`,AuthToken,async(e,s)=>{try{var{id:t,query:a,params:r}=e,{offset:o,limit:d}=a,n=r.anotherId,u=await GetMessagesRoomData(t,n,Number(o??0),Number(d??0));s.status(200).send(u)}catch(e){s.status(500).send(e)}}),router.get(`/${process.env.API_URL_METHOD}/message/read/:reader_id/:sender_id`,AuthToken,async(e,s)=>{try{var{reader_id:t,sender_id:a}=e.params,r=await SetReadMessage(t,a);s.status(200).send(r)}catch(e){s.status(500).send(e)}}),module.exports=router;// build date : 2025. 5. 21. ì˜¤í›„ 7:06:44