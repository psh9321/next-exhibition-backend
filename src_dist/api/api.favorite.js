let UserModel=require("../model/user").UserModel,FavoriteModel=require("../model/favorite").FavoriteModel,ResponseModel=require("../model/response").ResponseModel;async function FavoriteInfoData(e){var[e,o]=await Promise.all([await FavoriteModel.find({id:e}),FavoriteModel.countDocuments({id:e}).exec()]);return{favorite:e,total:o}}async function GetFavorite(e){try{var[o,t]=await Promise.all([FavoriteModel.countDocuments({id:e}).exec(),FavoriteModel.find({id:e}).sort({favoriteDate:-1})]),a={total:o,favorite:t};return new ResponseModel(200,a)}catch(e){throw new ResponseModel(500,e,"GetFavorite api 알수 없는 에러")}}async function AddFavorite(e,o){try{await new FavoriteModel({id:e,...o}).save();var t=await FavoriteInfoData(e);return new ResponseModel(200,t)}catch(e){throw new ResponseModel(500,e,"AddFavorite api 알수 없는 에러")}}async function RemoveFavorite(o,e){try{return e.length<=0?ResponseModel(403,e,"seqArr.length <= 0"):FavoriteModel.deleteMany({seq:{$in:e}}).then(async({})=>{var e=await FavoriteInfoData(o);return new ResponseModel(200,e)}).catch(e=>{throw new ResponseModel(500,e,"RemoveFavorite api 삭제 실패")})}catch(e){throw new ResponseModel(500,e,"RemoveFavorite api 알수 없는 에러")}}module.exports={AddFavorite:AddFavorite,GetFavorite:GetFavorite,RemoveFavorite:RemoveFavorite};// build date : 2025. 5. 21. 오후 7:06:44